(this["webpackJsonpspacex-app"]=this["webpackJsonpspacex-app"]||[]).push([[0],{13:function(e,t,a){e.exports={category_wrapper:"Category_category_wrapper__2yxix",item:"Category_item__1Icfy",like:"Category_like__T5-24"}},16:function(e,t,a){e.exports={main:"styles_main__3eJMh",list:"styles_list__2H6DH",search_wrapper:"styles_search_wrapper__39GDk",search_button:"styles_search_button__1ycr6",search_input:"styles_search_input__1TpNR",search_select:"styles_search_select__KK2w3"}},18:function(e,t,a){e.exports={header:"styles_header__D7Cd9",headerTitle:"styles_headerTitle__22Tb8"}},20:function(e,t,a){e.exports={app:"styles_app__1VXZu"}},3:function(e,t,a){e.exports={description:"styles_description__Ukzwf",description__image:"styles_description__image__3JJCi",description__text:"styles_description__text__EuenN",description__title:"styles_description__title__1JkKC",description__about:"styles_description__about__3e3Io",likeButton:"styles_likeButton__22pox",likeButtonHovered:"styles_likeButtonHovered__37fRi",rocketList:"styles_rocketList__32pEv",rocketList__item:"styles_rocketList__item__mHy7l",rocketList__info:"styles_rocketList__info__2I31j",rocketList__button:"styles_rocketList__button__1zvpu",rocketList__image:"styles_rocketList__image__2AjGo",rocketList__details:"styles_rocketList__details__jZ7yI",success:"styles_success__2Oerp",failure:"styles_failure__1xlyG"}},30:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),i=a(11),r=a.n(i),c=a(14),o=a(4),u=a.n(o),l=a(7),d=a(8),h=a(2),_=a(19),j=a(6),f=a(15),p=a(22),b=a(21),m=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(d.a)(a,[{key:"_getData",value:function(){var e=Object(f.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.path,s=t.data,n=t.config,e.prev=1,e.next=4,fetch("".concat("https://api.spacexdata.com/v4/").concat(a),Object(j.a)(Object(j.a)({},n),{},{body:JSON.stringify(s),headers:{"Content-type":"application/json"}}));case 4:return i=e.sent,e.next=7,i.json();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1),console.error("getData Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchRockets",value:function(){var e=Object(f.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getData({path:"rockets/query",data:{options:{limit:4}},config:{method:"POST"}});case 2:return t=e.sent,e.abrupt("return",this._transformRocketsData(t.docs));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLaunches",value:function(){var e=Object(f.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getData({path:"launches/query",data:{options:{limit:10,page:t,pagination:!0}},config:{method:"POST"}});case 2:return a=e.sent,e.abrupt("return",this._transformLaunchesData(a.docs));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_transformLaunchesData",value:function(e){return Object(_.a)(e).map((function(e){return Object(j.a)(Object(j.a)({},e),{},{isFavorite:!1,dataType:"Launches"})}))}},{key:"_transformRocketsData",value:function(e){return Object(_.a)(e).map((function(e){return Object(j.a)(Object(j.a)({},e),{},{isFavorite:!1,dataType:"Rockets"})}))}}]),a}(n.a.Component),v=new m,O=function(){function e(t){Object(l.a)(this,e),this.isLoading=!0,this.launchesDataStore=[],this.favoritesStore=void 0,Object(h.n)(this,{launchesDataStore:h.o,isLoading:h.o,loadLaunches:h.i.bound,updateLaunches:h.f.bound,setIsLoading:h.f.bound,addToFavorites:h.f.bound}),this.favoritesStore=t}return Object(d.a)(e,[{key:"updateLaunches",value:function(e){this.launchesDataStore=e}},{key:"setIsLoading",value:function(e){this.isLoading=e}},{key:"loadLaunches",value:u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setIsLoading(!0),e.next=3,v.fetchLaunches(1).then((function(e){t.updateLaunches(e),t.setIsLoading(!1)}));case 3:case"end":return e.stop()}}),e,this)}))},{key:"addToFavorites",value:function(e){var t=this.launchesDataStore.findIndex((function(t){return t.id===e}));this.favoritesStore.addToStore(this.launchesDataStore[t])}}]),e}(),k=new m,x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(l.a)(this,e),this.isLoading=!0,this.rocketsDataStore=[],this.favoritesStore=void 0,Object(h.n)(this,{rocketsDataStore:h.o,isLoading:h.o,loadRockets:h.i.bound,updateRockets:h.f.bound,setIsLoading:h.f.bound,addToFavorites:h.f.bound}),this.favoritesStore=t}return Object(d.a)(e,[{key:"updateRockets",value:function(e){this.rocketsDataStore=e}},{key:"setIsLoading",value:function(e){this.isLoading=e}},{key:"loadRockets",value:u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setIsLoading(!0),e.next=3,k.fetchRockets().then((function(e){t.updateRockets(e),t.setIsLoading(!1)}));case 3:case"end":return e.stop()}}),e,this)}))},{key:"addToFavorites",value:function(e){var t=this.rocketsDataStore.findIndex((function(t){return t.id===e}));this.favoritesStore.addToStore(this.rocketsDataStore[t])}}]),e}(),g=function(){function e(){Object(l.a)(this,e),this.favoritesDataStore=this.loadFromLocalStorage(),Object(h.n)(this,{favoritesDataStore:h.o,addToStore:h.f.bound,deleteFromStore:h.f.bound,loadFromLocalStorage:h.f.bound,updateLocalStorage:h.f.bound})}return Object(d.a)(e,[{key:"addToStore",value:function(e){var t=Date.now();e=Object(j.a)(Object(j.a)({},e),{},{favoriteDate:t}),this.favoritesDataStore.push(e),this.updateLocalStorage()}},{key:"deleteFromStore",value:function(e){var t=this.favoritesDataStore.findIndex((function(t){return t.id===e}));this.favoritesDataStore.splice(t,1),this.updateLocalStorage()}},{key:"loadFromLocalStorage",value:function(){var e=localStorage.getItem("favorites");return e?JSON.parse(e):[]}},{key:"updateLocalStorage",value:function(){localStorage.setItem("favorites",JSON.stringify(this.favoritesDataStore))}}]),e}(),y=a(18),L=a.n(y),S=a(0),N=function(){return Object(S.jsx)("header",{className:L.a.header,children:Object(S.jsxs)("h1",{className:L.a.headerTitle,children:[Object(S.jsx)("i",{className:"fas fa-space-shuttle"}),"SpaceX App"]})})},D=a(9),T=a(13),w=a.n(T),F=function(e){var t=e.data,a=e.onChangeCategory;return Object(S.jsx)("div",{className:w.a.item,onClick:function(){return a(t.name)},children:t.name})},C=[{id:1,name:"Launches",endpoint:"./launches"},{id:2,name:"Rockets",endpoint:"./rockets"},{id:3,name:"Favorites",endpoint:"./favorites"}],R=function(e){var t=e.onChangeCategory,a=C.map((function(e){return Object(S.jsx)(F,{data:e,onChangeCategory:t},e.id)}));return Object(S.jsx)("nav",{className:w.a.category_wrapper,children:a})},I=a(5),J=a.n(I),H=function(e){var t=e.data,a=e.selectedCategory,n=e.onClickItem,i=e.favorites;Object(s.useEffect)((function(){u(""),_("")}),[a]);var r=Object(s.useState)(""),c=Object(D.a)(r,2),o=c[0],u=c[1],l=Object(s.useState)(""),d=Object(D.a)(l,2),h=d[0],_=d[1];return Object(S.jsxs)(S.Fragment,{children:["Favorites"===a&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("input",{className:J.a.search_input,type:"search",placeholder:"\u041f\u043e\u0438\u0441\u043a...",value:o,onChange:function(e){return u(e.target.value)}}),Object(S.jsxs)("select",{id:"select",className:J.a.search_select,value:h,onChange:function(e){return _(e.target.value)},children:[Object(S.jsx)("option",{value:"",defaultValue:"",children:"Reset filter"}),";",C.map((function(e){if("Favorites"!==e.name)return Object(S.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]}),t?t.filter((function(e){return!h||e.dataType===h})).filter((function(e){return function(e){if(!o)return!0;var t=new RegExp(o,"i");return e.name.match(t)}(e)})).map((function(e){return Object(S.jsxs)("div",{className:J.a.item,onClick:function(){return n(e.id)},children:[Object(S.jsx)("img",{className:J.a.img,src:"Launches"===e.dataType?e.links.patch.small:e.flickr_images,alt:e.name}),Object(S.jsxs)("div",{className:J.a.body,children:[Object(S.jsx)("h3",{className:J.a.title,children:e.name}),Object(S.jsxs)("div",{className:J.a.description,children:["Launches"===e.dataType?e.success?Object(S.jsxs)("span",{className:J.a.success,children:["Success."," "]}):Object(S.jsxs)("span",{className:J.a.failure,children:["Failure."," "]}):void 0,"Launches"===e.dataType?e.details:e.description]})]}),(null===i||void 0===i?void 0:i.some((function(t){return t.id===e.id})))&&Object(S.jsx)("i",{className:"".concat(J.a.like," fas fa-heart")})]},e.id)})):Object(S.jsx)("p",{children:"Not found items"})]})},B=a(3),E=a.n(B),q=function(e){var t=e.dataRocket,a=t.name,s=t.height,n=t.diameter,i=t.mass,r=t.flickr_images;return Object(S.jsxs)("div",{className:E.a.rocketList__info,children:[Object(S.jsx)("div",{children:Object(S.jsx)("img",{className:E.a.rocketList__image,src:r,alt:a})}),Object(S.jsxs)("div",{className:E.a.rocketList__details,children:[Object(S.jsx)("h3",{children:a}),Object(S.jsxs)("div",{children:["Height: ",s.meters," meters"]}),Object(S.jsxs)("div",{children:["Diameter: ",n.meters," meters"]}),Object(S.jsxs)("div",{children:["Mass: ",i.kg," kg"]})]})]})},G=function(e){var t=e.moreDetails,a=e.rocketsDataStore,n=Object(s.useState)(!1),i=Object(D.a)(n,2),r=i[0],c=i[1],o=a.filter((function(e){return e.id===t.rocket}));return Object(S.jsxs)("div",{className:E.a.rocketList,children:[Object(S.jsxs)("div",{className:E.a.rocketList__item,children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("strong",{children:"Rocket:"})," "]}),o.map((function(e){return Object(S.jsxs)("div",{children:[Object(S.jsxs)("button",{className:E.a.rocketList__button,onClick:function(){return c(!r)},children:[e.name," ",r?"[\u2191]":"[\u2193]"]}),r&&Object(S.jsx)(q,{dataRocket:e})]},e.id)}))]}),Object(S.jsxs)("div",{className:E.a.rocketList__item,children:[Object(S.jsx)("strong",{children:"Success:"})," ",t.success?Object(S.jsx)("span",{className:E.a.success,children:"Success"}):Object(S.jsx)("span",{className:E.a.failure,children:"Failure"})]}),Object(S.jsxs)("div",{className:E.a.rocketList__item,children:[Object(S.jsx)("strong",{children:"Flight number: "})," ",t.flight_number]}),Object(S.jsxs)("div",{className:E.a.rocketList__item,children:[Object(S.jsx)("strong",{children:"Webcast: "})," ",Object(S.jsx)("a",{href:t.links.webcast,target:"_blank",children:t.links.webcast})]}),Object(S.jsxs)("div",{className:E.a.rocketList__item,children:[Object(S.jsx)("strong",{children:"Wikipedia: "})," ",Object(S.jsx)("a",{href:t.links.wikipedia,target:"_blank",children:t.links.wikipedia})]})]})},M=function(e){var t=e.id,a=e.name,s=e.description,n=e.thumbnail,i=e.addToFavorite,r=e.deleteFromFavorites,c=e.moreDetails,o=e.favorites,u=e.rocketsDataStore;return Object(S.jsxs)("div",{className:E.a.description,children:[Object(S.jsx)("img",{className:E.a.description__image,src:n,alt:a}),Object(S.jsxs)("div",{className:E.a.description__text,children:[Object(S.jsx)("h2",{className:E.a.description__title,children:a}),Object(S.jsx)("div",{className:E.a.description__about,children:s})]}),"Launches"===c.dataType&&Object(S.jsx)(G,{moreDetails:c,rocketsDataStore:u}),Object(S.jsx)("button",{className:E.a.likeButton,onClick:function(){return(null===o||void 0===o?void 0:o.some((function(e){return e.id===t})))?r(t):i(t)},children:Object(S.jsx)("i",{className:(null===o||void 0===o?void 0:o.some((function(e){return e.id===t})))?"".concat(E.a.likeButtonHovered," fas fa-heart"):"far fa-heart"})})]},t)},z=a(16),A=a.n(z),K=Object(c.a)((function(e){var t,a=e.launchesStore,n=e.rocketsStore,i=e.favoritesStore;Object(s.useEffect)((function(){a.loadLaunches(),n.loadRockets()}),[]);var r=Object(h.q)(a.launchesDataStore),c=Object(h.q)(n.rocketsDataStore),o=Object(h.q)(i.favoritesDataStore).sort((function(e,t){return t.favoriteDate-e.favoriteDate})),u=Object(s.useState)("Launches"),l=Object(D.a)(u,2),d=l[0],_=l[1],j=Object(s.useState)(null),f=Object(D.a)(j,2),p=f[0],b=f[1],m=function(){switch(d){case"Launches":return p?r.filter((function(e){return e.id===p})):[r[0]];case"Rockets":return p?c.filter((function(e){return e.id===p})):[c[0]];case"Favorites":return p?o.filter((function(e){return e.id===p})):0!==o.length?[o[0]]:null;default:return null}};return a.isLoading||n.isLoading?Object(S.jsx)("h1",{children:"...Loading"}):Object(S.jsxs)("main",{className:A.a.main,children:[Object(S.jsx)(R,{onChangeCategory:function(e){_(e),b(null)}}),Object(S.jsx)("div",{className:A.a.list,children:Object(S.jsx)("div",{className:A.a.items,children:Object(S.jsx)(H,{data:function(){switch(d){case"Launches":return r;case"Rockets":return c;case"Favorites":return o;default:return null}}(),selectedCategory:d,onClickItem:function(e){b(e)},favorites:o})})}),m()?null===(t=m())||void 0===t?void 0:t.map((function(e){return Object(S.jsx)(M,{id:e.id,name:e.name,description:"Launches"===e.dataType?e.details:e.description,thumbnail:"Launches"===e.dataType?e.links.patch.small:e.flickr_images,dataType:e.dataType,addToFavorite:"Launches"===e.dataType?a.addToFavorites:n.addToFavorites,deleteFromFavorites:i.deleteFromStore,moreDetails:e,favorites:o,rocketsDataStore:c},e.id)})):Object(S.jsx)("div",{style:{width:"100%"},children:Object(S.jsx)("h1",{style:{textAlign:"center",marginTop:"100px"},children:"No items"})})]})})),V=a(20),X=a.n(V),Z=new g,P=new O(Z),W=new x(Z),U=Object(c.a)((function(){return Object(S.jsxs)("div",{className:X.a.app,children:[Object(S.jsx)(N,{}),Object(S.jsx)(K,{launchesStore:P,favoritesStore:Z,rocketsStore:W})]})})),Q=document.getElementById("root");r.a.render(Object(S.jsx)(s.StrictMode,{children:Object(S.jsx)(U,{})}),Q)},5:function(e,t,a){e.exports={item:"List_item__3ejfe",body:"List_body__ziSZX",title:"List_title__2GSHV",description:"List_description__G3otm",like:"List_like__y_Ryi",success:"List_success__9rp86",failure:"List_failure__1mMDT"}}},[[30,1,2]]]);
//# sourceMappingURL=main.a1b920cd.chunk.js.map